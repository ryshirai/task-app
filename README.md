# GlanceFlow

チームの「今」を一瞥で把握する。視認性特化型チーム・タイムライン・ダッシュボード。

## 1. 概要

**GlanceFlow** は、チームメンバーの稼働状況を直感的なタイムライン形式で可視化し、コミュニケーションコストを削減するためのツールです。「誰が」「今」「何をしているか」をリアルタイムに把握し、タスクごとの正確な工数管理を実現します。

## 2. 主な機能

### 📅 インタラクティブ・タイムライン (JST対応)
- **日本時間基準の稼働表示**: 開発環境やブラウザのタイムゾーンに依存せず、常に正確な日本時間で表示・記録。
- **ドラッグ＆ドロップ操作**: タイムライン上をドラッグするだけで作業ログを作成。既存ログの移動や期間変更も直感的に行えます。
- **スティッキー設定**: 選択した日付や表示グループはブラウザに保存され、リロードしても維持されます。

### 🚀 作業時間の分離と集計 (Task/Log Separation)
- **タスクの分裂防止**: 1つのタスクに対して複数の作業時間を「ログ」として記録。複数日にまたがる作業も、単一のタスクIDに集約されます。
- **アクティブタスク・セレクター**: 記録時に「進行中のタスク」から選ぶだけで、タイトルやタグを自動補完し、既存タスクへ時間を紐付けます。
- **合計時間の自動計算**: タスクごとに費やした全時間の合計を自動集計。詳細画面でリアルタイムに確認可能です。

### 👥 表示グループ設定
- **カスタムフィルタリング**: メンバーをプロジェクトやチーム単位でグループ化。
- **クイック切り替え**: タブ形式のセレクターにより、表示するメンバーを瞬時に切り替え、自分に関連する情報のみに集中できます。

### 👤 ユーザー管理（ロール変更・権限管理）
- **管理者向けロール管理**: 管理者はユーザー管理画面から他ユーザーのロール（admin/member）を変更できます。
- **即時反映される権限**: ロール変更は認証ミドルウェアで最新状態を参照するため、ログアウトなしで即時に反映されます。
- **管理者限定機能**: ユーザー管理およびロール変更機能は管理者のみ利用可能です。

### 📊 管理者レポート & 分析
- **正確なタスクレポート**: 実際の作業ログに基づいた開始・終了時刻と、合計稼働時間をCSV出力。
- **個人分析ダッシュボード**: 完了タスク数や日々の活動量をヒートマップで可視化。

### 🔔 通知 & ログ
- **リアルタイム通知**: タスクのアサインなどを即座に通知。
- **操作履歴 (Activity Log)**: 誰がいつ、どのタスクをどう変更したかを詳細に記録。

## 3. 技術スタック

- **Frontend**: SvelteKit, Tailwind CSS, TypeScript
- **Backend**: Rust (Axum), SQLx (Postgres), Argon2, JWT
- **Database**: PostgreSQL (Normalized Schema)
- **Infrastructure**: Docker / Docker Compose

## 4. クイックスタート

### 4.1. データベースのセットアップ
PostgreSQLを起動し、環境変数 `DATABASE_URL` を設定します。

### 4.2. バックエンドの起動
```bash
cd backend
# .env に DATABASE_URL, JWT_SECRET を設定
cargo run
```
※ 初回起動時にデータベーススキーマが自動的に構築されます。

### 4.3. フロントエンドの起動
```bash
cd frontend
npm install
npm run dev
```

## 5. 基本的な使い方フロー

1.  **組織の登録**: ログイン画面の「新しい組織を作成する」から、管理者アカウントと組織を登録します。
2.  **メンバーの追加**: 「メンバー管理」から新しいユーザーを登録するか、招待機能を利用します。
3.  **表示グループの作成**: タイムライン上の「⚙️」アイコンから表示グループを作成し、必要なメンバーのみを表示します。
4.  **作業の記録**: 自分の行をドラッグするか、進行中タスクから選択して作業を開始します。
5.  **レポートの確認**: 管理者メニューから、チーム全体の稼働状況をタスク単位で集計・出力します。

---

*Powered by GlanceFlow Development Team*

# 実装計画: Glance 機能拡張

現状のMVP（Minimum Viable Product）から、実用的なチームタスク管理ダッシュボードへ進化させるための機能実装計画です。

## フェーズ1: 基本操作の完遂（最優先）
ユーザーがタスク管理を行う上で必須となる基本機能を実装し、ツールとしての実用性を確保します。

### 1. タスクの詳細編集・削除機能
- **目的**: 誤登録の修正や、状況変化に伴うステータス更新、不要なタスクの削除を可能にする。
- **現状**: タスク作成後の変更・削除が一切不可。
- **実装内容**:
    - タスクをクリックした際に詳細モーダルを表示。
    - **編集項目**:
        - タイトル
        - ステータス（未着手 / 進行中 / 完了）
        - 進捗率（0% - 100%）
        - 開始日時・終了日時
    - **削除**: 削除ボタンを配置し、確認ダイアログを経て削除。
- **技術要件**:
    - **Frontend**: 
        - `TaskDetailModal.svelte` コンポーネントの作成。
        - フォームバリデーションの実装。
    - **Backend**: 
        - 既存の `PATCH /api/tasks/{id}` および `DELETE /api/tasks/{id}` エンドポイントを使用。

### 2. ドラッグ＆ドロップによるスケジュール調整
- **目的**: 直感的なスケジュール変更を実現し、UXを向上させる。
- **現状**: 時間を変更するにはタスクを削除して再作成するしかない。
- **実装内容**:
    - **移動**: タスクバーをドラッグして左右に動かし、開始・終了時間を維持したまま時間をずらす。
    - **リサイズ**: タスクバーの端をドラッグして、開始時間または終了時間を変更（所要時間の伸縮）。
    - **保存**: 操作終了（ドロップ）時にAPIへ更新リクエストを送信。
- **技術要件**:
    - **Frontend**: 
        - マウスイベント（`mousedown`, `mousemove`, `mouseup`）を用いたインタラクション実装。
        - タイムライン座標と時刻の相互変換ロジックの強化。

## フェーズ2: コラボレーションと運用性の強化
チームでの継続的な利用と運用負荷軽減を目的とした機能強化です。

### 3. リアルタイム更新（自動ポーリング）
- **目的**: チームメンバーの最新状況を常に可視化し、「Glance（一目見る）」の価値を高める。
- **現状**: ブラウザをリロードしないと最新情報が反映されない。
- **実装内容**:
    - `setInterval` を使用し、一定間隔（例: 30秒）で `GET /api/members` をバックグラウンド実行。
    - 取得したデータで画面をリアクティブに更新。
- **技術要件**:
    - **Frontend**: 
        - Svelteのストアまたはコンポーネントのライフサイクル管理。

### 4. メンバー管理機能
- **目的**: 開発者（DB管理者）以外でもメンバーの追加・変更を行えるようにし、運用の属人化を防ぐ。
- **現状**: データベースに直接SQLを発行しないとメンバー追加ができない。
- **実装内容**:
    - 設定画面（Settings）の実装。
    - メンバー一覧の表示、新規追加、削除機能。
- **技術要件**:
    - **Backend**: 
        - `POST /api/members` (新規作成) の実装が必要。
        - `DELETE /api/members/{id}` (削除) の実装が必要。
    - **Frontend**: 
        - 設定用モーダルUIの実装。

---

## 開発ロードマップ

1.  **Step 1**: タスク詳細編集・削除機能の実装（フェーズ1-1）
2.  **Step 2**: ドラッグ＆ドロップ操作の実装（フェーズ1-2）
3.  **Step 3**: メンバー管理API & UIの実装（フェーズ2-4）※BE実装含むため優先度調整
4.  **Step 4**: 自動更新機能の実装（フェーズ2-3）
